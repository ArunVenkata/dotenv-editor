#!/bin/bash

DIALOG=${DIALOG=dialog}



function detectFullKeyOrCategory () {
    VARIABLE_LIST=`awk -F= '{print $1 }' .env  | grep -v '^#' | grep -v '^$'`
    VARIABLE_GROUP=`awk -F= '{print $1 }' .env  | grep -v '^#' | grep -v '^$' | awk -F"_" '{print $1}' | sort | uniq`

    MENU_LIST=""
    for i in $VARIABLE_LIST; do
        PREFIX=`echo $i | awk -F"_" '{print $1}'`
        REST=`echo $i | awk -F"_" '{print $2}'`
    
        VALUE=`./bin/dotenv.sh get $i`
        MENU_LIST="$MENU_LIST $i \"$VALUE\" "
        # echo "- $i => $VALUE"
        #$DIALOG --clear --title "Configuration - $i" --inputbox "$i" 8 80 "`./bin/dotenv.sh get $i`"
    done

    return $MENU_LIST
}



function mainMenu() {




    choosenMenuOptions=$($DIALOG --cancel-button "Exit" --title "DBeng main menu" --fb --menu "Choose an option" 15 60 6 \
        "1" "Create database" \
        "2" "List existing databases" \
        "3" "Delete database" \
        "4" "Do a table operation" \
        # $MENU_LIST \
        "OTHER" "Other" \
        "Exit" "Exit to shell" \
            3>&1 1>&2 2>&3)
    exitstatus=$?
    [[ "$exitstatus" = 1 ]] && exit;	#test if exit button is pressed

    case $choosenMenuOptions in
        Exit) #Exit the dotenv editor application
        	# echo "1 => Aap"
        	# clear;
    echo $MENU_LIST
        	exit;
    	    ;;

        1) #Create Database
        	echo "1 => Aap"
    	    ;;

        2) #Create Database
        	echo "2 => Blaat"
	        ;;

	    *)
            echo $choosenMenuOptions
			echo "Other: $choosenMenuOptions"
            exit;
			;;
	esac
	mainMenu
}


###
# Main program structure
# welcomeMessage;
mainMenu
